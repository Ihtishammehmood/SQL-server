<!DOCTYPE html>
<html>
<head>
<title>apple.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="contents">Contents</h1>
<p><a href="#min-max-caluclation">1-min max caluclation</a><br>
<a href="#trend-identification">2-Trend identification</a><br>
<a href="#stock-price-vs-the-divided">3-stock price vs the divided</a><br>
<a href="#impact-of-stock-split">4-impact of stock split</a><br>
<a href="#measuring-stock-performance">5-Measuring stock performance</a><br>
<a href="#outlier-detection-using-iqr-technique">6-outlier detection using IQR technique</a></p>
<h2 id="data-exploration-using-sql-server"><strong>Data exploration using sql server</strong></h2>
<p>This process involves querying the data, examining its structure, and summarizing its characteristics to gain a deeper understanding of its patterns and trends using SQL Server.</p>
<blockquote>
<p><a href="https://public.tableau.com/app/profile/ihtisham.mehmood/viz/InsightsintoApplestockprice/Dashboard1">See data visualization here</a></p>
</blockquote>
<h2 id="min-max-caluclation">min max caluclation</h2>
<p>This SQL query retrieves summary statistics for the 'close_price' column of the 'Apple' table. It calculates the minimum, maximum, and average values of the 'close_price'.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">select</span>
<span class="hljs-keyword">min</span>(close_price) <span class="hljs-keyword">as</span> min_price,
<span class="hljs-keyword">max</span>(close_price) <span class="hljs-keyword">as</span> max_price,
<span class="hljs-keyword">avg</span>(close_price) <span class="hljs-keyword">as</span> avg_price

<span class="hljs-keyword">from</span> Apple
</div></code></pre>
<p>The result provides insights into the range of prices, the highest and lowest prices recorded, and the average price for the specified dataset. By running this query, you can quickly understand key characteristics of the price distribution, helping you gain a basic understanding of the data's variability and central tendency.</p>
<h2 id="trend-identification">Trend identification</h2>
<p>This SQL code examines changes in the 'close_price' of the 'Apple' dataset using a Common Table Expression (CTE). It computes 'previous_close' using the lag function to get the previous day's price. The 'price_change' is found by subtracting yesterday's price from today's.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">with</span> CTE <span class="hljs-keyword">as</span>(
<span class="hljs-keyword">select</span> 
date_only,close_price,
lag(close_price) <span class="hljs-keyword">over</span> (<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> date_only) <span class="hljs-keyword">as</span> previous_close,
close_price - lag(close_price) <span class="hljs-keyword">over</span> (<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> date_only) <span class="hljs-keyword">as</span> price_change
<span class="hljs-keyword">from</span> [Apple])
<span class="hljs-keyword">select</span> *
<span class="hljs-keyword">from</span> cte
<span class="hljs-keyword">where</span> price_change &gt;<span class="hljs-number">0</span>
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> price_change <span class="hljs-keyword">desc</span>
</div></code></pre>
<p>This helps understand daily price shifts. The final query highlights positive price changes, suggesting days when Apple's stock price rose. Results are sorted by change size, unveiling the most notable upward shifts. This approach uncovers significant positive trends in stock value, aiding insights into Apple's market performance.</p>
<h2 id="stock-price-vs-the-divided">stock price vs the divided</h2>
<p>This SQL query retrieves specific data from the 'Apple' dataset. It selects the 'date_only', 'close_price', 'volume', and 'dividends' columns from the table. The query focuses on rows where the 'Dividends' value is greater than zero, which means there were dividend payments on those days. The results are organized in descending order based on the 'Dividends' value.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">select</span> 
date_only,close_price, volume,dividends
<span class="hljs-keyword">from</span> Apple
<span class="hljs-keyword">where</span> Dividends &gt;<span class="hljs-number">0</span>
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> Dividends <span class="hljs-keyword">desc</span>
</div></code></pre>
<p>By running this query, we can see the dates, closing prices, trading volumes, and dividend amounts on days when Apple paid dividends. This helps us understand when Apple distributed dividends and the associated stock market activities on those occasions.</p>
<h2 id="impact-of-stock-split">impact of stock split</h2>
<p>It focuses on days when there were stock splits, which are changes in the number of shares outstanding. For each of these days, it calculates adjusted values to account for the split effect. It divides the original open, high, low, and close prices by the stock split , resulting in adjusted prices that reflect the impact of the split.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">select</span> date_only,[Stock Splits],
open_price / [stock splits] <span class="hljs-keyword">as</span> adjusted_open,
high_price / [stock splits] <span class="hljs-keyword">as</span> adjusted_high,
low_price / [stock splits] <span class="hljs-keyword">as</span> adjusted_low,
close_price / [stock splits] <span class="hljs-keyword">as</span> adjusted_close,
volume * [stock splits] <span class="hljs-keyword">as</span> adjusted_volume
<span class="hljs-keyword">from</span> [apple]
<span class="hljs-keyword">where</span> [Stock Splits] &gt;<span class="hljs-number">0</span>
</div></code></pre>
<p>Similarly, it multiplies the original volume by the stock split , providing an adjusted volume that considers the split effect. By running this query, we can see how stock splits influenced the trading data and gain insights into how the stock's value was adjusted to accommodate these events.</p>
<h2 id="measuring-stock-performance">Measuring stock performance</h2>
<ul>
<li>This SQL query helps us find the best months for Apple's stock over the years 2015 to 2023. It does this by first organizing the data into a neat summary called a Common Table Expression (CTE). This summary calculates the average stock price and average trading volume for each month of each year.</li>
<li>The main part of the query works with this summary. It picks out the year, month, average trading volume, and average stock price from the CTE. Using a trick called &quot;window ranking,&quot; it gives each month a rank based on its average stock price. This means it puts the months with the highest stock prices at the top of the list.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">with</span> cte <span class="hljs-keyword">as</span> (
<span class="hljs-keyword">select</span> 
<span class="hljs-keyword">datepart</span>(<span class="hljs-keyword">year</span>,date_only)  <span class="hljs-keyword">as</span> <span class="hljs-keyword">year</span>,
<span class="hljs-keyword">datepart</span>(<span class="hljs-keyword">month</span>, date_only) <span class="hljs-keyword">as</span> <span class="hljs-keyword">month</span>,
<span class="hljs-keyword">avg</span>(close_price) <span class="hljs-keyword">as</span> avg_stock_price,
<span class="hljs-keyword">avg</span>(volume) <span class="hljs-keyword">as</span> avg_volume
<span class="hljs-keyword">from</span> Apple
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 
<span class="hljs-keyword">datepart</span>(<span class="hljs-keyword">year</span>,date_only),
<span class="hljs-keyword">datepart</span>(<span class="hljs-keyword">month</span>, date_only)
)
<span class="hljs-keyword">select</span>*
<span class="hljs-keyword">from</span>(
<span class="hljs-keyword">select</span> <span class="hljs-keyword">year</span>,<span class="hljs-keyword">month</span>,avg_volume,avg_stock_price,
row_number() <span class="hljs-keyword">over</span> (<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">year</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> avg_stock_price <span class="hljs-keyword">desc</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">rank</span>
<span class="hljs-keyword">from</span> cte 
<span class="hljs-keyword">where</span> <span class="hljs-keyword">year</span> &gt;= <span class="hljs-string">'2015'</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">year</span> &lt;= <span class="hljs-string">'2023'</span> ) <span class="hljs-keyword">as</span> ranked_cte
<span class="hljs-keyword">where</span> <span class="hljs-keyword">rank</span> =<span class="hljs-number">1</span>
</div></code></pre>
<ul>
<li>The query pays attention only to years between 2015 and 2023, so it filters out the other years</li>
<li>Lastly, it checks which months are ranked as number one (the top rank) for each year. This gives us the months when Apple's stock had the highest average price for each year in the specified time range.</li>
</ul>
<blockquote>
<p>In short, the query helps us find the months when Apple's stock did really well each year from 2015 to 2023. It's like picking out the stars of each year based on their stock prices</p>
</blockquote>
<h2 id="outlier-detection-using-iqr-technique">outlier detection using IQR technique</h2>
<p>In summary, this query helps us spot unusual days in Apple's stock price history days where the price is either remarkably low or incredibly high compared to the typical pattern. It's like finding the days when something really unique happened with Apple's stock price.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">with</span> outlier_detection <span class="hljs-keyword">as</span> (
<span class="hljs-keyword">select</span> close_price,
<span class="hljs-keyword">avg</span>(close_price) <span class="hljs-keyword">over</span> () <span class="hljs-keyword">as</span> mean,
<span class="hljs-keyword">stdev</span>(close_price) <span class="hljs-keyword">over</span>() <span class="hljs-keyword">as</span> <span class="hljs-keyword">stdev</span>,
<span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.25</span>) <span class="hljs-keyword">within</span> <span class="hljs-keyword">group</span> (<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> close_price) <span class="hljs-keyword">over</span> () <span class="hljs-keyword">as</span> q1,
<span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.75</span>) <span class="hljs-keyword">within</span> <span class="hljs-keyword">group</span> (<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> close_price) <span class="hljs-keyword">over</span> () <span class="hljs-keyword">as</span> q3
<span class="hljs-keyword">from</span> Apple)
<span class="hljs-keyword">select</span>
close_price,
<span class="hljs-keyword">case</span>
<span class="hljs-keyword">when</span> close_price &lt; q1<span class="hljs-number">-1.5</span> * (q3 - q1) <span class="hljs-keyword">or</span> close_price &gt; q3 + <span class="hljs-number">1.5</span> * (q3 -q1) <span class="hljs-keyword">then</span> <span class="hljs-string">'outlier'</span>
<span class="hljs-keyword">else</span> <span class="hljs-string">'not an outlier'</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">as</span> outlier_status
<span class="hljs-keyword">from</span> outlier_detection
</div></code></pre>
<ul>
<li>For each day's stock price, it calculates the average of all the stock prices (mean) and how much the prices typically vary from this average (standard deviation).</li>
<li>It also figures out where the 25th percentile (Q1) and 75th percentile (Q3) of the prices are. This means it's looking at prices that are lower than 25% of all prices and prices that are higher than 75% of all prices.</li>
</ul>
<blockquote>
<p>Formula:<br>
IQR = Q3 -Q1</p>
</blockquote>

</body>
</html>
